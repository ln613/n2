!function(t){var n={};function r(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)r.d(e,u,function(n){return t[n]}.bind(null,u));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=10)}([function(t,n,r){var e=r(4),u=r(5),o=r(6);t.exports=function(t){return e(t)||u(t)||o()}},function(t,n){t.exports=function(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}},function(t,n,r){var e=r(7),u=r(8),o=r(9);t.exports=function(t,n){return e(t)||u(t,n)||o()}},,function(t,n){t.exports=function(t){if(Array.isArray(t)){for(var n=0,r=new Array(t.length);n<t.length;n++)r[n]=t[n];return r}}},function(t,n){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,n){t.exports=function(t){if(Array.isArray(t))return t}},function(t,n){t.exports=function(t,n){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],e=!0,u=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(e=(c=i.next()).done)&&(r.push(c.value),!n||r.length!==n);e=!0);}catch(t){u=!0,o=t}finally{try{e||null==i.return||i.return()}finally{if(u)throw o}}return r}}},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,n,r){"use strict";r.r(n);var e=r(1),u=r.n(e),o=r(0),c=r.n(o);function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function a(t){return function n(r){return 0===arguments.length||i(r)?n:t.apply(this,arguments)}}function f(t){return function n(r,e){switch(arguments.length){case 0:return n;case 1:return i(r)?n:a((function(n){return t(r,n)}));default:return i(r)&&i(e)?n:i(r)?a((function(n){return t(n,e)})):i(e)?a((function(n){return t(r,n)})):t(r,e)}}}var p,l,s,y=f((function(t,n){return null!=n&&n.constructor===t||n instanceof t}));!function(t){t[t["+"]=0]="+",t[t["-"]=1]="-",t[t["*"]=2]="*",t[t["/"]=3]="/"}(p||(p={})),function(t){t[t.add=1]="add",t[t.delete=2]="delete",t[t.clear=3]="clear",t[t.replace=4]="replace",t[t.sort=5]="sort",t[t.filter=6]="filter"}(l||(l={})),function(t){t[t.data_ui=1]="data_ui",t[t.data=2]="data",t[t.ui=3]="ui",t[t.rule=4]="rule",t[t.effect=5]="effect"}(s||(s={}));var d=r(2),v=r.n(d),g=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function m(t,n){return function(){var r=arguments.length;if(0===r)return n();var e=arguments[r-1];return g(e)||"function"!=typeof e[t]?n.apply(this,arguments):e[t].apply(e,Array.prototype.slice.call(arguments,0,r-1))}}function h(t){return function n(r,e,u){switch(arguments.length){case 0:return n;case 1:return i(r)?n:f((function(n,e){return t(r,n,e)}));case 2:return i(r)&&i(e)?n:i(r)?f((function(n,r){return t(n,e,r)})):i(e)?f((function(n,e){return t(r,n,e)})):a((function(n){return t(r,e,n)}));default:return i(r)&&i(e)&&i(u)?n:i(r)&&i(e)?f((function(n,r){return t(n,r,u)})):i(r)&&i(u)?f((function(n,r){return t(n,e,r)})):i(e)&&i(u)?f((function(n,e){return t(r,n,e)})):i(r)?a((function(n){return t(n,e,u)})):i(e)?a((function(n){return t(r,n,u)})):i(u)?a((function(n){return t(r,e,n)})):t(r,e,u)}}}var b=h(m("slice",(function(t,n,r){return Array.prototype.slice.call(r,t,n)}))),O=b(0,-1);function j(t){return"[object String]"===Object.prototype.toString.call(t)}var w=f((function(t,n){var r=t<0?n.length+t:t;return j(n)?n.charAt(r):n[r]}))(-1),P=a((function(t){return null==t})),A=a((function(t){return!!g(t)||!!t&&("object"==typeof t&&(!j(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),E=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function x(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,r){return n.apply(this,arguments)};case 3:return function(t,r,e){return n.apply(this,arguments)};case 4:return function(t,r,e,u){return n.apply(this,arguments)};case 5:return function(t,r,e,u,o){return n.apply(this,arguments)};case 6:return function(t,r,e,u,o,c){return n.apply(this,arguments)};case 7:return function(t,r,e,u,o,c,i){return n.apply(this,arguments)};case 8:return function(t,r,e,u,o,c,i,a){return n.apply(this,arguments)};case 9:return function(t,r,e,u,o,c,i,a,f){return n.apply(this,arguments)};case 10:return function(t,r,e,u,o,c,i,a,f,p){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var _=f((function(t,n){return x(t.length,(function(){return t.apply(n,arguments)}))}));function S(t,n,r){for(var e=r.next();!e.done;){if((n=t["@@transducer/step"](n,e.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e=r.next()}return t["@@transducer/result"](n)}function D(t,n,r,e){return t["@@transducer/result"](r[e](_(t["@@transducer/step"],t),n))}var T="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function k(t,n,r){if("function"==typeof t&&(t=function(t){return new E(t)}(t)),A(r))return function(t,n,r){for(var e=0,u=r.length;e<u;){if((n=t["@@transducer/step"](n,r[e]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e+=1}return t["@@transducer/result"](n)}(t,n,r);if("function"==typeof r["fantasy-land/reduce"])return D(t,n,r,"fantasy-land/reduce");if(null!=r[T])return S(t,n,r[T]());if("function"==typeof r.next)return S(t,n,r);if("function"==typeof r.reduce)return D(t,n,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var I=h(k);function N(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function q(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?N(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var M=-1===window.location.href.indexOf("localhost")?"/.netlify/functions/":"http://localhost:9000/",V=M+"api",F=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(nt(e)?e(t):e)&&console.log(n?"".concat(n," - "):"",r(t)),t},L=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return n.reduce((function(t,n){return Object.entries(n(t)||{}).forEach((function(n){var r=v()(n,2),e=r[0],u=r[1];return t[e]=u})),t}),t)}},U=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];return function(n){return C(O(r),w(r))((function(r,e){return e?e([t].concat(r).reduce((function(t,n){return q({},t,{},n(t)||{})}),n)):t(n)}))}},C=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return t.apply(void 0,n)}},H=function(t,n,r){return C(r.find(t))((function(t){return P(t)?void 0:n(t)}))},z=I((function(t,n){return t>=n?t:n}),Number.NEGATIVE_INFINITY),B=(I((function(t,n){return t<=n?t:n}),Number.POSITIVE_INFINITY),function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return n.some((function(n){return n===t}))}}),R=function(t){return function(n){return Y(n.lastIndexOf(t),n)}},Y=function(t,n){return-1===t?[n,""]:[n.slice(0,t),n.slice(t+1)]},G=function t(n){return n.reduce((function(n,r){return rt(r)?[].concat(c()(n),c()(t(r))):[].concat(c()(n),[r])}),[])},J=function(t,n){for(var r=arguments.length,e=new Array(r>2?r-2:0),u=2;u<r;u++)e[u-2]=arguments[u];return function(r){return C(nt(t)?t(r):r[t],(function(){return nt(n)?n(r):n}))((function(t,n){return ut(e)?H((function(n){return t==n[0]}),(function(t){return t[1](r)||n()}),e)||n():e[0][t]&&e[0][t](r)||n()}))}},W=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];return function(n){return C((function(){return nt(t)?t(n):t}))((function(t){return H((function(t){return t[0](n)}),(function(r){return r[1](n)||t()}),r)||t()}))}},X=function(t,n,r){return r.filter(t).map(n)},$=function(t,n,r){return r.filter(t).forEach(n)},K=function(t){return void 0===t},Q=function(t){return void 0!==t},Z=function(t){return"string"==typeof t},tt=function(t){return"number"==typeof t},nt=function(t){return"function"==typeof t},rt=Array.isArray,et=function(t){return y(Object,t)},ut=function(t){return t.length>0&&rt(t[0])},ot=function(t){return"object"===t.type},ct=function(t){return"list"===t.type},it=function(t,n){return"options"===H((function(n){return n.name===t.type}),(function(t){return t.type}),n)},at=function(t,n){return ct(t)||it(t,n)},ft=function(t){return B(s.data_ui,s.data)(t.type)},pt=function(t){return B(s.data_ui,s.ui)(t.type)},lt=function(t){return t.type===s.rule},st=function(t){return t.type===s.effect},yt={currency:function(t){return"$".concat(t)}};function dt(t,n){return function(){return n.call(this,t.apply(this,arguments))}}var vt=a(m("tail",b(1,1/0)));function gt(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var mt=Number.isInteger||function(t){return t<<0===t},ht=h((function(t,n,r){var e={};for(var u in r)e[u]=r[u];return e[t]=n,e})),bt=h((function t(n,r,e){if(0===n.length)return r;var u=n[0];if(n.length>1){var o=!P(e)&&gt(u,e)?e[u]:mt(n[1])?[]:{};r=t(Array.prototype.slice.call(n,1),r,o)}if(mt(u)&&g(e)){var c=[].concat(e);return c[u]=r,c}return ht(u,r,e)}));function Ot(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function jt(t,n,r){return function(){if(0===arguments.length)return r();var e=Array.prototype.slice.call(arguments,0),u=e.pop();if(!g(u)){for(var o=0;o<t.length;){if("function"==typeof u[t[o]])return u[t[o]].apply(u,e);o+=1}if(Ot(u)){var c=n.apply(null,e);return c(u)}}return r.apply(this,arguments)}}var wt=function(){return this.xf["@@transducer/init"]()},Pt=function(t){return this.xf["@@transducer/result"](t)},At=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=wt,t.prototype["@@transducer/result"]=Pt,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),Et=f((function(t,n){return new At(t,n)}));var xt=f((function(t,n){return 1===t?a(n):x(t,function t(n,r,e){return function(){for(var u=[],o=0,c=n,a=0;a<r.length||o<arguments.length;){var f;a<r.length&&(!i(r[a])||o>=arguments.length)?f=r[a]:(f=arguments[o],o+=1),u[a]=f,i(f)||(c-=1),a+=1}return c<=0?e.apply(this,u):x(c,t(n,u,e))}}(t,[],n))})),_t=Object.prototype.toString,St=function(){return"[object Arguments]"===_t.call(arguments)?function(t){return"[object Arguments]"===_t.call(t)}:function(t){return gt("callee",t)}}(),Dt=!{toString:null}.propertyIsEnumerable("toString"),Tt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],kt=function(){return arguments.propertyIsEnumerable("length")}(),It=function(t,n){for(var r=0;r<t.length;){if(t[r]===n)return!0;r+=1}return!1},Nt="function"!=typeof Object.keys||kt?a((function(t){if(Object(t)!==t)return[];var n,r,e=[],u=kt&&St(t);for(n in t)!gt(n,t)||u&&"length"===n||(e[e.length]=n);if(Dt)for(r=Tt.length-1;r>=0;)gt(n=Tt[r],t)&&!It(e,n)&&(e[e.length]=n),r-=1;return e})):a((function(t){return Object(t)!==t?[]:Object.keys(t)})),qt=f(jt(["fantasy-land/map","map"],Et,(function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return xt(n.length,(function(){return t.call(this,n.apply(this,arguments))}));case"[object Object]":return k((function(r,e){return r[e]=t(n[e]),r}),{},Nt(n));default:return function(t,n){for(var r=0,e=n.length,u=Array(e);r<e;)u[r]=t(n[r]),r+=1;return u}(t,n)}}))),Mt=f((function(t,n){return function(r){return function(e){return qt((function(t){return n(t,e)}),r(t(e)))}}})),Vt=f((function(t,n){for(var r=n,e=0;e<t.length;){if(null==r)return;r=r[t[e]],e+=1}return r})),Ft=a((function(t){return Mt(Vt(t),bt(t))})),Lt=a((function(t){return xt(t.length,t)})),Ut=function(t){return{value:t,"fantasy-land/map":function(){return this}}},Ct=f((function(t,n){return t(Ut)(n).value})),Ht=a((function(t){return function(){return t}})),zt=function(t){return{value:t,map:function(n){return zt(n(t))}}},Bt=h((function(t,n,r){return t((function(t){return zt(n(t))}))(r).value})),Rt=h((function(t,n,r){return Bt(t,Ht(n),r)})),Yt=h((function(t,n,r){var e=Array.prototype.slice.call(r,0);return e.splice(t,n),e})),Gt=f((function(t,n){return Array.prototype.slice.call(n,0).sort((function(n,r){for(var e=0,u=0;0===e&&u<t.length;)e=t[u](n,r),u+=1;return e}))})),Jt=h((function(t,n,r){var e=t(n),u=t(r);return e>u?-1:e<u?1:0})),Wt=h((function(t,n,r){var e=t(n),u=t(r);return e<u?-1:e>u?1:0})),Xt=f((function(t,n){return Vt([t],n)}));function $t(t){for(var n,r=[];!(n=t.next()).done;)r.push(n.value);return r}function Kt(t,n,r){for(var e=0,u=r.length;e<u;){if(t(n,r[e]))return!0;e+=1}return!1}var Qt="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n},Zt=a((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function tn(t,n,r,e){var u=$t(t);function o(t,n){return nn(t,n,r.slice(),e.slice())}return!Kt((function(t,n){return!Kt(o,n,t)}),$t(n),u)}function nn(t,n,r,e){if(Qt(t,n))return!0;var u,o,c=Zt(t);if(c!==Zt(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(c){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(u=t.constructor,null==(o=String(u).match(/^function (\w*)/))?"":o[1]))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!Qt(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!Qt(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var i=r.length-1;i>=0;){if(r[i]===t)return e[i]===n;i-=1}switch(c){case"Map":return t.size===n.size&&tn(t.entries(),n.entries(),r.concat([t]),e.concat([n]));case"Set":return t.size===n.size&&tn(t.values(),n.values(),r.concat([t]),e.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Nt(t);if(a.length!==Nt(n).length)return!1;var f=r.concat([t]),p=e.concat([n]);for(i=a.length-1;i>=0;){var l=a[i];if(!gt(l,n)||!nn(n[l],t[l],f,p))return!1;i-=1}return!0}var rn=f((function(t,n){return nn(t,n,[],[])}));function en(t,n){return function(t,n,r){var e,u;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(e=1/n;r<t.length;){if(0===(u=t[r])&&1/u===e)return r;r+=1}return-1}if(n!=n){for(;r<t.length;){if("number"==typeof(u=t[r])&&u!=u)return r;r+=1}return-1}return t.indexOf(n,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,r);case"object":if(null===n)return t.indexOf(n,r)}for(;r<t.length;){if(rn(t[r],n))return r;r+=1}return-1}(n,t,0)>=0}var un,on=f(en),cn=function(t){return function(n,r,e){var u,o=K(r)?t.op1?Hn(t.op1)(n):"":r,c=K(e)?t.op2?Hn(t.op2)(n):"":e,i=t.operator,a=!1;if("!"===i.slice(0,1)&&(a=!0,i=i.slice(1)),"~"===i)u=on(c,o);else if("="===i)u=o==c;else{var f=+o,p=+c;"+"===i?u=f+p:"-"===i?u=f-p:"*"===i?u=f*p:"/"===i?u=f/p:">"===i?u=f>p:"<"===i?u=f<p:">="===i?u=f>=p:"<="===i&&(u=f<=p)}return a&&(u=!u),u.toString()}},an=function(t,n,r){return H((function(t){return t.name===n}),(function(t){return t[r]}),t)},fn=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Z(t)?"".concat(n>0?" ":"",'[name="').concat(t,'"]'):"> :nth-child(".concat(t+1,")"))},pn=function(t){return Un(t).map(fn).join("")},ln=function(t){return t.innerHTML=""},sn=function(t,n,r){return r.setAttribute(t,n)},yn=function(t,n){return n.getAttribute(t)},dn=function t(n,r){return r.getAttribute(n)||(r.parentElement?t(n,r.parentElement):"")};un="name";function vn(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}var gn=function(t){return"window"===t},mn=function(t){return gn(t.input.target)},hn={input:{event:"load",target:"window"},output:{action:"initData",target:""}},bn={input:{event:"click",target:"__sync"},output:{action:"sync",target:""}},On=function(t){return{input:{event:"change",target:t},output:{action:"input",target:t}}},jn=function(t,n){return sr(wn(n.input.target,t.schema),n.parent).filter((function(r){return!n.parent||C(Qn(yn("path",r)))((function(r){return!r||Xn(t.schema,r)===yn("type",n.parent)}))})).forEach((r=n.input.event,e=function(r){return xr(t,Dn(function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?vn(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}({context:t},F(n).output,{eventData:r})))},function(t){return t.addEventListener(r,e)}));var r,e},wn=function(t,n){return Jn(n,t)?"name":t};function Pn(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function An(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Pn(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var En=W((function(t){return t.value||t.calcValue(t.data)}),[function(t){return t.listOp==l.clear},function(t){return[]}]),xn=J("listOp",(function(t){return t.path}),[l.add,function(t){return t.path+"."+(Hn(t.path,t.data)||[]).length}]),_n=function(t){return t.listOp>0&&an(t.schema,t.path,"itemType")||""},Sn=function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e){return C(Ln(r,e.name))(W((function(t){return[kn(t,{value:""},s.ui),In(On(t))]}),[function(){return ct(e)},function(t){return[kn(t,{listOp:l.clear})]}],[function(){return it(e,n)},function(t){return[kn(t,{listOp:l.clear}),kn(t,{value:an(n,e.type,"options"),listOp:l.add},s.ui),In(On(t))]}],[function(){return ot(e)},function(r){return G(e.fields.map(t(n,r)))}]))}},Dn=J((function(t){return t.action}),[],{message:function(t){return[Nn((function(){return alert(t.target)}))]},sync:function(t){return[Nn((function(){return Mn(t.context)}))]},initData:function(t){return[].concat(c()((n=t.context.schema,G(n.map(Sn(n,""))))),c()(Fn(t.context.data)),[Nn((function(){return Vn(t.context)}),!0)],c()(Tn(t.context.rules)));var n},input:function(t){return[kn(t.target,{value:t.eventData.target.value},s.data)]},assign:function(t){var n;return[kn(t.target,{calcValue:(null===(n=t.params)||void 0===n?void 0:n.exp)&&cn(t.params.exp)})]},add:function(t){return[kn(t.target,{listOp:l.add,calcValue:function(n){var r,e;return(null===(r=t.params)||void 0===r?void 0:r.item)?[An({},Hn(t.params.item,n),{_uid:(e=Hn(t.target,n),z(e.map((function(t){return Q(t._uid)?t._uid:-1})))+1)})]:[]}})]},remove:function(t){return[kn(t.target,{listOp:l.delete,value:dn("_uid",t.eventData.srcElement)})]},sort:function(t){return[kn(t.target,{listOp:l.sort,calcValue:function(n){var r,e;return Gn(t.target,null===(r=t.params)||void 0===r?void 0:r.field,null===(e=t.params)||void 0===e?void 0:e.order,n)}})]},filter:function(t){var n;return(null===(n=t.params)||void 0===n?void 0:n.predicates)&&[kn(t.target,{listOp:l.filter,calcValue:function(n){var r;return Yn(t.target,null===(r=t.params)||void 0===r?void 0:r.predicates,n,t.eventData.srcElement.getAttribute("path"),t.context.schema)}})]}}),Tn=function(t,n,r,e){return X((function(t){return!(mn(t)||r&&t.output.target!=r&&t.input.target!=e&&"add_to_cart"!=t.input.target)}),(function(t){return In(t,void 0,n)}),t)},kn=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.data_ui;return An({type:r,path:t,value:"",listOp:0,itemType:"",calcValue:function(){return""}},n)},In=function(t,n,r){return An({type:s.rule,value:n},t,{parent:r})},Nn=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:s.effect,value:"",effect:t,wait:n}},qn=function(t,n,r,e){return An({},kn(t,{value:n,listOp:r}),{data:e})},Mn=function(t){var n=t.data;return Promise.all(Object.entries(n).map((function(t){var n=v()(t,2),r=n[0],e=n[1];return rt(e)&&function(t){var n=t.doc,r=t.body;return fetch("".concat(V,"?doc=").concat(n),{method:"post",body:JSON.stringify(r)}).then((function(t){return t.json()}))}({doc:r,body:u()({},r,e)})}))).then((function(t){return alert("saved")}))},Vn=function(t){return C(X((function(t){return"list"===t.type}),(function(t){return t.name}),t.schema))((function(n){return Promise.all(n.map((function(t){return function(t){var n=t.doc;return fetch("".concat(V,"?doc=").concat(n)).then((function(t){return t.json()}))}({doc:t})}))).then((function(r){return xr(t,r.map((function(t,r){return kn(n[r],{value:t,listOp:l.add})})))}))}))},Fn=function(t){return Object.entries(t).map((function(t){var n=v()(t,2),r=n[0],e=n[1];return kn(r,{value:e},s.ui)}))},Ln=function(t,n){return(t?t+".":"")+n},Un=function(t){return t.replace(/\[/g,".").replace(/\]/g,"").split(".").map((function(t){return isNaN(+t)?t:+t}))},Cn=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return x(arguments[0].length,I(dt,arguments[0],vt(arguments)))}(Un,Ft),Hn=Lt((function(t,n){return Ct(Cn(t))(n)})),zn=function(t){return Rt(Cn(t.path))(t.value,t.data)},Bn=J((function(t){return t.listOp}),zn,[l.filter,function(t){return t.data}],[l.add,function(t){return rt(t.value)?Rn.apply(void 0,c()(t.value.map((function(n,r){return C(R(".")(t.path))((function(t){var e=v()(t,2);return[e[0]+"."+(+e[1]+r),n,l.add]}))}))))(t.data):zn(t)}],[l.delete,function(t){return t.value?Bt(Cn(t.path),Yt(+t.value,1),t.data):t.data}]),Rn=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return n.reduce((function(t,n){var r=v()(n,3),e=r[0],u=r[1],o=r[2];return Bn(qn(e,u,o,t))}),t)}},Yn=function(t,n,r,e,u){return n&&C(Hn(t,r))((function(t){return t.filter((function(t){return F(n).every((function(n){return"true"===cn(n)(r,t[F(n.op1)],(function(t){return t&&t.length>1&&'"'===t[0]&&'"'===t[t.length-1]}(o=n.op2)?o.slice(1,o.length-1):"")||Hn(F(Kn(e,n.op1,u)),r));var o}))}))}))},Gn=function(t,n,r,e){return C(Hn(t,e))((function(t){return Gt([("descending"===r?Jt:Wt)(Xt(n))],t)}))},Jn=function(t,n){return t.find((function(t){return t.name===n}))},Wn=function(t,n){return C(Jn(t,n))((function(t){return t&&ot(t)?t.fields:[]}))},Xn=function(t,n,r){return C(Jn(t,r||n))((function(t){return t?ct(t)?t.itemType:ot(t)?C(Jn(t.fields,w(Un(n))))((function(t){return t?t.type:""})):t.type:""}))},$n=function(t,n){return C((r=t.schema,e=t.itemType||t.path,u=n,C(Jn(Wn(r,e),u))((function(t){return t&&Jn(r,t.type)||t}))))((function(r){return r?function(t){return"calculated"===t.type}(r)?r.format.replace(/{id}/g,t.value.id):t.value[n]:""}));var r,e,u},Kn=function(t,n,r){return C(Un(t))((function(t){return C(t.findIndex((function(t){return!tt(t)&&Xn(r,t)===n})))((function(n){return n>-1?"".concat(t.slice(0,n+2).join("."),".id"):""}))}))},Qn=function(t){return C(Un(t))((function(t){return t.length<2?"":2===t.length?t[0]:tt(t[t.length-2])?t[t.length-3]:t[t.length-2]}))};function Zn(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}var tr,nr,rr=function(t,n){return H((function(n){return n.listPath===t.split(".").map((function(t){return isNaN(+t)?t:"0"})).join(".")}),(function(t){return[t.element,t.type]}),n)||[]},er=function(t,n){return G(t.map((function(t,r){return lr(function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Zn(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}({},n,{path:R(".")(n.path)[0]+"."+r,listOp:0,value:t,parent:n.clone[r]}))})))},ur=function(t,n,r,e){return yr(t,e).forEach((function(t){return n&&(e=n,u=t,o=+r,C(document.createDocumentFragment())((function(t){e.forEach((function(n){return t.appendChild(n)})),u.insertBefore(t,u.children[o])})));var e,u,o}))},or=U((function(t){var n,r=(n=t.path,C(R(".")(n))((function(t){return isNaN(+t[1])?[n,0]:t})));return{listPath:r[0],idx:r[1]}}),(function(t){var n=rr(t.listPath,t.templates);return{template:n[0],itemType:n[1]}}),(tr="template",nr=[],function(t){return K(t[tr])?{_return:nr}:{}}),(function(t){var n;return{clone:(n=t.template,t.value.map((function(t){return n.cloneNode(!0)})))}}),(function(t){var n,r;n=t.clone,r=t.value,t.path,r.map((function(t,r){return et(t)&&Object.entries(t).forEach((function(t){var e=v()(t,2),u=e[0],o=e[1];return rt(o)&&yr(u,n[r]).forEach(ln)}))}))}),(function(t){return{cloneUpdates:er(t.value,t)}}),(function(t){ur(t.listPath,t.clone,t.idx,t.parent)}),(function(t){var n,r,e,u;return n=t.rules,r=t.clone,e=t.listPath,u=t.itemType,t.cloneUpdates.concat(G(r.map((function(t){return Tn(n,t,e,u)}))))})),cr=function(t){var n=t.path;return yr(n).forEach(ln)},ir=U(cr,(function(t){return{path:t.path+".0"}}),or),ar=J((function(t){return t.listOp}),[],[l.add,or],[l.clear,cr],[l.delete,function(t){var n=t.path,r=t.value;return yr(n).forEach((function(t){return e=r,C((n=t).querySelector('[_uid="'.concat(e,'"]')))((function(t){return t&&n.removeChild(t)}));var n,e}))}],[l.replace,ir],[l.filter,ir],[l.sort,ir]);function fr(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}var pr=function(t){var n=t.path,r=t.value,e=t.parent,u=t.itemType,o=t.schema;return yr(n,e).forEach((function(t){!function(t){return W((function(n){return n.innerText=t}),[function(t){return t instanceof HTMLInputElement},function(n){return n.value=t}],[function(t){return t instanceof HTMLOptionElement},function(n){return n.value=n.innerText=t}],[function(t){return t instanceof HTMLSelectElement},function(n){return n.value=t}],[function(t){return t instanceof HTMLImageElement},function(n){return n.src=t}])}(Q(r)?function(t,n){for(var r=arguments.length,e=new Array(r>2?r-2:0),u=2;u<r;u++)e[u-2]=arguments[u];return yt[t]?yt[t].apply(yt,[n].concat(e)):n}(Xn(o,n,u),r):"")(t),sn("path",n,t)}))},lr=W([],[function(t){return!Q(t.value)},pr],[function(t){return t.listOp>0},ar],[function(t){return Z(t.value)||tt(t.value)},pr],[function(t){return et(t.value)},function(t){return C(t.value)((function(n){return Wn(t.schema,t.itemType).reduce((function(r,e){return[].concat(c()(r),c()("_uid"===e.name&&t.parent?(sn(e.name,n[e.name],t.parent),[]):lr(function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?fr(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}({},t,{path:Ln(t.path,e.name),value:$n(t,e.name),listOp:ct(e)?l.replace:0}))))}),[])}))}]),sr=function(t,n){return gn(t)?[window]:F(yr(F(t),n))},yr=function(t,n){return!t&&n?[n]:function(t,n){return c()((n||document).querySelectorAll(":scope "+pn(t)))}(n?w(t.split(".")):t,n)},dr=function(t,n){return G(t.map(vr(t,n)))},vr=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return W([],[function(n){return at(n,t)},gr(t,n)],[ot,function(t){return dr(t.fields,Ln(n,r?"0":t.name))}])},gr=function(t,n){return function(r){return C(Ln(n,r.name))((function(n){return C(yr(n+".0"))((function(e){return e.length>0?mr(n,r,e[0]).concat(hr(t,n)(r)):[]}))}))}},mr=function(t,n,r){var e=ct(n)?n.itemType:n.type;return sn("type",e,r),[{listPath:t,type:e,element:r}]},hr=function(t,n){return W([],[ct,function(r){return C(Jn(t,r.itemType))((function(r){return r?vr(t,n,!0)(r):[]}))}])},br=["input.target","output.target","output.params.item","output.params.field","output.params.exp.op1","output.params.exp.op2","output.params.predicate.op1","output.params.predicate.op2"],Or=function(t,n){return G(t.map((function(t){return C((r=t,G(br.map((function(t){return(Hn(t,r)||"").match(/\[(\w+)\]/g)||[]})).map((function(t){return t.slice(1,t.length-1)})))))((function(r){return 0===r.length?[t]:r.map((function(r){return C(function(t,n){return an(n,t,"options")}(r,n))((function(n){return n.map((function(n){return br.reduce((function(t,r){return Bn(r,Hn(r,t).replace(new RegExp("[".concat(n,"]"),"g"),n),t)}),t)}))}))}))}));var r})))};function jr(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function wr(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?jr(Object(r),!0).forEach((function(n){u()(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var Pr=function(t,n,r){return e=ft,u=function(r){return An({},e=wr({},r,{data:t,schema:n}),{path:xn(e),itemType:_n(e),value:En(e)});var e},r.map((function(t){return e(t)?u(t):t}));var e,u},Ar=L((function(t){var n;return{schema:(n=t.schema,G(n.map((function(t){return[t].concat(ot(t)?t.fields.filter(ct):[])}))))}}),(function(t){var n,r;return{rules:(n=t.rules,r=t.schema,[hn,bn].concat(c()(Or(n,r))))}}),(function(t){var n,r;n=t.rules,r=t,n.filter(mn).forEach((function(t){return jn(r,In(t))}))})),Er=L((function(t){var n;return{templates:(n=t.schema,t.templates||dr(n,""))}}),(function(t){return{updates:Pr(t.data,t.schema,t.updates)}}),(function(t){var n,r;return{data:(n=t.data,r=t.updates,Rn.apply(void 0,c()(X(ft,(function(t){return[t.path,t.value,t.listOp]}),r)))(n))}}),F,(function(t){var n,r;return{updates:(n=t.updates,r=t,n.concat(G(X(pt,(function(t){return lr(wr({},r,{},t))}),n))))}}),(function(t){var n,r;n=t.updates,r=t,$(lt,(function(t){return jn(r,t)}),n)}),(function(t){var n;n=t.updates,$(st,(function(t){return t.effect()}),n)})),xr=function(t,n){t.updates=n,Er(t)};Ar({data:{},rules:[{input:{event:"click",target:"sort_price_up"},output:{action:"sort",target:"products",params:{field:"price",order:"ascending"}}},{input:{event:"click",target:"sort_price_down"},output:{action:"sort",target:"products",params:{field:"price",order:"descending"}}},{input:{event:"click",target:"sort_name_up"},output:{action:"sort",target:"products",params:{field:"name",order:"ascending"}}},{input:{event:"click",target:"sort_name_down"},output:{action:"sort",target:"products",params:{field:"name",order:"descending"}}},{input:{event:"click",target:"category"},output:{action:"filter",target:"products",params:{predicates:[{op1:"category",operator:"=",op2:"category"}]}}},{input:{event:"click",target:"sub_category"},output:{action:"filter",target:"products",params:{predicates:[{op1:"category",operator:"=",op2:"category"},{op1:"sub_category",operator:"=",op2:"sub_category"}]}}},{input:{event:"click",target:"add_to_cart"},output:{action:"add",target:"cart",params:{item:"product"}}}],schema:[{name:"product",type:"object",fields:[{name:"id",type:"integer"},{name:"name",type:"string"},{name:"category",type:"category"},{name:"sub_category",type:"sub_category"},{name:"description",type:"string"},{name:"price",type:"currency"},{name:"sale",type:"currency"},{name:"image",type:"product_image"}]},{name:"products",type:"list",itemType:"product"},{name:"category",type:"object",fields:[{name:"id",type:"integer"},{name:"name",type:"string"},{name:"sub_categories",type:"list",itemType:"sub_category"}]},{name:"sub_category",type:"object",fields:[{name:"id",type:"integer"},{name:"name",type:"string"}]},{name:"categories",type:"list",itemType:"category"},{name:"cart",type:"list",itemType:"item"},{name:"item",type:"object",fields:[{name:"product",type:"product"},{name:"count",type:"integer"}]},{name:"product_image",type:"calculated",format:"https://res.cloudinary.com/vttc/image/upload/v1523776795/products/{id}.jpg"}]})}]);
//# sourceMappingURL=products.bundle.js.map